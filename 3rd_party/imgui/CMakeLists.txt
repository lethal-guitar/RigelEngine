add_library(dear_imgui STATIC
    imgui_impl_opengl3.cpp

    imgui/imgui.cpp
    imgui/imgui_demo.cpp
    imgui/imgui_draw.cpp
    imgui/imgui_widgets.cpp
    imgui/examples/imgui_impl_sdl.cpp
)
target_include_directories(dear_imgui
    PUBLIC
    ${CMAKE_SOURCE_DIR}/3rd_party/imgui/imgui
    ${CMAKE_SOURCE_DIR}/3rd_party/imgui/imgui/examples
)

# conditional compilation for emscripten (webassemly) to work
if ("${CMAKE_SYSTEM_NAME}" STREQUAL "Emscripten")
    target_link_libraries(dear_imgui
    PRIVATE
    glad
    )
else()
    target_link_libraries(dear_imgui
        PRIVATE
        SDL2::Core
        glad
    )  
endif()

if (APPLE)
    target_link_libraries(dear_imgui
        PRIVATE
        "-framework AppKit"
    )
endif()


target_compile_definitions(dear_imgui
    PRIVATE
    -DIMGUI_IMPL_OPENGL_LOADER_GLAD
)

if (USE_GL_ES)
    target_compile_definitions(dear_imgui
        PRIVATE
        -DIMGUI_IMPL_OPENGL_ES2
        -DIMGUI_IMPL_OPENGL_ES_USE_LOADER
    )
endif()

if (MSVC)
    target_compile_options(dear_imgui PRIVATE
        /w
    )
elseif(CMAKE_CXX_COMPILER_ID MATCHES "Clang")
    target_compile_options(dear_imgui PRIVATE
        -w
    )
elseif (CMAKE_COMPILER_IS_GNUCXX)
    target_compile_options(dear_imgui PRIVATE
        -w
    )
endif()
